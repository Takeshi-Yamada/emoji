<h1>この絵文字から何を連想する？</h1>

<div class="quiz-detail-card">
  <h1><%= @question.content %></h1>
</div>
<br>

<% if flash[:notice] %>
  <p class="flash flash-success"><%= flash[:notice] %></p>
<% elsif flash[:alert] %>
  <p class="flash flash-error"><%= flash[:alert] %></p>
<% end %>

<% if current_user == @question.user %>
  <div class="form-group">
    答え：<%= @question.correct %><br><br>
    <%= link_to "編集する ✏️", edit_question_path(@question), class: "btn-create" %>
  </div>
<% else %>
  <% if @answer&.result.blank?%>
    <%= form_with(model: [@question, Answer.new], local: true, data: { turbo: false }) do |f|%>
      <div class="form-group">
        <%= f.label :body, "あなたの答え" %><br>
        <%= f.text_field :body, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.submit "答え合わせ 🔍", class: "btn-create" %>
      </div>
    <% end %>
  <% else %>
    <p>あなたの答え：<%= @answer.body %></p>
    <p>結果：
      <% if @answer.result %>
        <span class="correct">⭕</span>
      <% else %>
        <span class="incorrect">❌</span>
      <% end %>
    </p>
  <% end %>
<% end %>

<%= link_to "← 他のクイズを見る", questions_path, class: "btn" %>